<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ç»­è´¹æé†’ç®¡ç†ç³»ç»Ÿ Â· iPhone 16 Pro Max åŸå‹</title>
<meta name="color-scheme" content="light dark">
<style>
  /* --- Design tokens --- */
  :root {
    --bg: #f6f7fb;
    --app: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --border: #e5e7eb;
    --shadow: 0 10px 30px rgba(0,0,0,.08);
    --primary: #2563eb;
    --primary-weak: rgba(37,99,235,.1);
    --success: #16a34a;
    --success-weak: rgba(22,163,74,.12);
    --warning: #f59e0b;
    --warning-weak: rgba(245,158,11,.14);
    --danger: #ef4444;
    --danger-weak: rgba(239,68,68,.14);
    --accent: #10b981;
    --accent-weak: rgba(16,185,129,.12);
    --chip: #f3f4f6;
    --frost: rgba(255,255,255,.75);
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #0f1115;
      --app: #151922;
      --text: #e5e7eb;
      --muted: #9aa0aa;
      --border: #222733;
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --primary: #5b8dff;
      --primary-weak: rgba(91,141,255,.12);
      --success: #35c87c;
      --success-weak: rgba(53,200,124,.14);
      --warning: #ffc95d;
      --warning-weak: rgba(255,201,93,.12);
      --danger: #ff6b6b;
      --danger-weak: rgba(255,107,107,.16);
      --accent: #7ae7c7;
      --accent-weak: rgba(122,231,199,.1);
      --chip: #1f2430;
      --frost: rgba(21,25,34,.76);
    }
  }

  /* --- Page reset --- */
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
    color: var(--text);
    background: linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 60%, transparent));
    letter-spacing: .2px;
  }
  h1,h2,h3 { margin: 0; }
  p { margin: 0 0 8px; color: var(--muted); }
  button { font: inherit; }
  a { color: inherit; text-decoration: none; }

  /* --- Desktop preview frame (approx iPhone 16 Pro Max logical viewport) --- */
  .frame {
    min-height: 100vh;
    display: grid;
    place-items: center;
    padding: 28px;
  }
  .device {
    width: 440px;        /* ~ iPhone 16 Pro Max é€»è¾‘å®½åº¦è¿‘ä¼¼å€¼ */
    height: 956px;       /* ~ iPhone 16 Pro Max é€»è¾‘é«˜åº¦è¿‘ä¼¼å€¼ */
    background: var(--app);
    border-radius: 42px;
    box-shadow: var(--shadow);
    position: relative;
    overflow: hidden;
    border: 1px solid var(--border);
  }
  .island {
    position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
    width: 130px; height: 36px; background: #000; border-radius: 22px;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    z-index: 20;
    opacity: .85;
  }

  /* --- App layout --- */
  .app {
    position: absolute; inset: 0;
    display: grid;
    grid-template-rows: auto 1fr auto;
    padding-top: calc(10px + env(safe-area-inset-top));
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
  }
  header.appbar {
    position: sticky; top: 0; z-index: 10;
    background: linear-gradient(180deg, color-mix(in srgb, var(--app) 86%, transparent), var(--app));
    backdrop-filter: blur(8px);
    border-bottom: 1px solid var(--border);
    padding: 10px 14px 8px;
    display: flex; align-items: center; gap: 10px;
  }
  .title {
    font-weight: 700; font-size: 18px;
    display: flex; flex-direction: column; line-height: 1.1;
  }
  .subtitle { font-size: 11px; color: var(--muted); }

  .badge {
    margin-left: auto;
    background: var(--primary-weak);
    color: var(--primary);
    padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 600;
  }

  main {
    overflow: auto;
    padding: 12px 14px 12px;
  }

  .section {
    margin-bottom: 14px;
    background: var(--app);
  }
  .card {
    background: var(--app);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px;
    box-shadow: none;
  }
  .shadow { box-shadow: var(--shadow); }

  .row { display: flex; align-items: center; gap: 8px; }
  .between { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
  .chip {
    display: inline-flex; align-items: center; gap: 6px;
    font-size: 12px; padding: 6px 10px; border-radius: 999px;
    background: var(--chip);
    border: 1px solid var(--border);
    white-space: nowrap;
  }
  .chip[data-kind="success"] { background: var(--success-weak); color: var(--success); border-color: transparent; }
  .chip[data-kind="warning"] { background: var(--warning-weak); color: var(--warning); border-color: transparent; }
  .chip[data-kind="danger"] { background: var(--danger-weak); color: var(--danger); border-color: transparent; }
  .chip[data-kind="primary"] { background: var(--primary-weak); color: var(--primary); border-color: transparent; }
  .chip[data-kind="accent"] { background: var(--accent-weak); color: var(--accent); border-color: transparent; }

  .kpi {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
  }
  .kpi .item {
    border: 1px solid var(--border); border-radius: 12px; padding: 10px;
  }
  .kpi .item h3 { font-size: 18px; font-weight: 800; }
  .kpi .item p { font-size: 11px; }

  /* --- Stepper / timeline --- */
  .timeline { display: grid; gap: 10px; }
  .step {
    display: grid; grid-template-columns: 24px 1fr; gap: 10px;
  }
  .dot {
    width: 10px; height: 10px; border-radius: 8px; margin-top: 6px;
    background: var(--primary);
    position: relative;
  }
  .dot::after {
    content: ""; position: absolute; top: 12px; left: 4px; width: 2px; height: calc(100% + 8px);
    background: var(--border);
  }
  .step:last-child .dot::after { display: none; }
  .step .content { border: 1px solid var(--border); border-radius: 12px; padding: 10px; }
  .step h4 { margin: 0; font-size: 14px; font-weight: 700; }
  .step .meta { font-size: 11px; color: var(--muted); margin-top: 3px; }
  .step .actions { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
  .btn {
    background: var(--primary);
    color: white; border: none; border-radius: 10px; padding: 8px 12px; font-weight: 700; font-size: 13px;
    box-shadow: 0 2px 0 rgba(0,0,0,.08); cursor: pointer;
  }
  .btn.ghost {
    background: var(--chip); color: var(--text); border: 1px solid var(--border); box-shadow: none;
  }
  .btn.link { background: transparent; color: var(--primary); padding: 0; }

  /* --- Students --- */
  .tools { display: flex; gap: 8px; margin-bottom: 10px; }
  .input {
    display: flex; align-items: center; gap: 8px; padding: 10px 12px; border-radius: 12px;
    background: var(--chip); border: 1px solid var(--border); color: var(--text); flex: 1;
  }
  .seg { display: inline-flex; background: var(--chip); border: 1px solid var(--border); border-radius: 999px; padding: 4px; }
  .seg button {
     padding: 6px 10px; border: none; border-radius: 999px; background: transparent; color: var(--muted);
     font-weight: 600; cursor: pointer;
  }
  .seg button.active { background: var(--primary-weak); color: var(--primary); }

  .student { display: grid; grid-template-columns: auto 1fr auto; gap: 10px; align-items: center; border: 1px solid var(--border); border-radius: 14px; padding: 10px; }
  .avatar {
    width: 42px; height: 42px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--accent)); color: white;
    display: grid; place-items: center; font-weight: 800;
  }
  .student h4 { font-size: 14px; margin: 0; }
  .student .meta { font-size: 11px; color: var(--muted); }
  .pill {
    padding: 6px 10px; border-radius: 999px; font-size: 11px; font-weight: 800; border: 1px solid var(--border);
  }
  .pill[data-type="high"] { background: var(--success-weak); color: var(--success); border-color: transparent; }
  .pill[data-type="mid"] { background: var(--warning-weak); color: var(--warning); border-color: transparent; }
  .pill[data-type="low"] { background: var(--danger-weak); color: var(--danger); border-color: transparent; }

  .student .actions { display: flex; gap: 6px; margin-top: 8px; }
  .student .actions .mini { font-size: 12px; padding: 6px 8px; }

  details.student-extra { grid-column: 1 / -1; }
  details summary { cursor: pointer; list-style: none; display: flex; align-items: center; gap: 6px; color: var(--primary); }
  details summary::-webkit-details-marker { display:none; }

  .list { display: grid; gap: 8px; }

  /* --- Modal / sheet --- */
  dialog.sheet {
    width: min(420px, 96%);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 0;
    background: var(--app);
    color: var(--text);
    box-shadow: var(--shadow);
  }
  dialog::backdrop { background: rgba(0,0,0,.3); backdrop-filter: blur(2px); }
  .sheet header { padding: 12px; border-bottom: 1px solid var(--border); }
  .sheet main { padding: 12px; max-height: 62vh; overflow: auto; }
  .sheet footer { padding: 12px; border-top: 1px solid var(--border); display: flex; gap: 8px; justify-content: flex-end; }

  textarea, select, input[type="text"], input[type="number"], input[type="time"], input[type="date"] {
    width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--chip); color: var(--text);
    font: inherit;
  }

  /* --- Parents / Payment --- */
  .plan { border: 1px solid var(--border); border-radius: 14px; padding: 10px; display: grid; gap: 6px; }
  .radio { display:flex; gap:8px; align-items:center; }
  .radio input { accent-color: var(--primary); }
  .payments { display: grid; grid-template-columns: repeat(2,1fr); gap: 8px; }
  .payments .method {
    border: 1px dashed var(--border); border-radius: 12px; padding: 10px; text-align: center; font-weight: 700; cursor: pointer;
  }
  .payments .method.active { border-style: solid; border-color: var(--primary); background: var(--primary-weak); color: var(--primary); }

  /* --- Insights & tiny charts --- */
  .bar {
    height: 10px; background: var(--chip); border-radius: 999px; border: 1px solid var(--border); position: relative;
    overflow: hidden;
  }
  .bar > i { display:block; height:100%; background: var(--primary); border-radius: 999px; }
  .ring {
    --val: 0;
    width: 68px; height: 68px; border-radius: 50%;
    background: conic-gradient(var(--primary) calc(var(--val) * 1%), color-mix(in srgb, var(--chip) 86%, transparent) 0);
    display: grid; place-items: center;
    border: 6px solid var(--app);
  }
  .ring span { font-weight: 800; }

  .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .grid3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
  .grid1 { display: grid; gap: 10px; }

  .hint { font-size: 11px; color: var(--muted); }

  /* --- Bottom tab bar --- */
  nav.tabbar {
    position: sticky; bottom: 0; z-index: 10;
    background: linear-gradient(0deg, color-mix(in srgb, var(--app) 86%, transparent), var(--app));
    border-top: 1px solid var(--border);
    padding: 6px 10px calc(6px + env(safe-area-inset-bottom));
    display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px;
  }
  .tabbar button {
    display: grid; place-items: center; gap: 2px; padding: 8px 6px; border-radius: 12px; border: none; background: transparent; color: var(--muted); cursor: pointer;
  }
  .tabbar button.active { color: var(--primary); background: var(--primary-weak); font-weight: 700; }
  .tabbar i { font-style: normal; font-size: 18px; line-height: 1; }

  /* --- Floating toolbox button --- */
  .fab {
    position: fixed; right: 22px; bottom: 84px; z-index: 9;
    width: 56px; height: 56px; border-radius: 28px; display: grid; place-items: center;
    background: var(--primary); color: white; font-size: 22px; box-shadow: var(--shadow); border: none; cursor: pointer;
  }

  /* --- Tiny helpers --- */
  .muted { color: var(--muted); }
  .sm { font-size: 12px; }
  .xs { font-size: 11px; }
  .mb8 { margin-bottom: 8px; }
  .mb12 { margin-bottom: 12px; }
  .mt8 { margin-top: 8px; }
  .mt12 { margin-top: 12px; }
  .mt4 { margin-top: 4px; }
  .mr8 { margin-right: 8px; }
  .w100 { width: 100%; }
</style>
</head>
<body>
  <div class="frame">
    <div class="device">
      <div class="island"></div>
      <div class="app">
        <header class="appbar">
          <div class="row">
            <span class="chip" title="Environment">ğŸ“± iPhone 16 Pro Max</span>
          </div>
          <div class="title">
            <span>ç»­è´¹æé†’ç®¡ç†ç³»ç»Ÿ</span>
            <span class="subtitle">Renewal Reminder Management Â· Prototype</span>
          </div>
          <span class="badge">åŸå‹ / Prototype</span>
        </header>

        <main id="views">
          <!-- View: Overview -->
          <section class="view" data-view="home">
            <div class="card shadow mb12">
              <div class="between">
                <h2 style="font-size:16px;">åˆ†é˜¶æ®µæé†’æœºåˆ¶ <span class="muted sm">Phased reminders</span></h2>
                <span class="chip" data-kind="primary">çŠ¶æ€ï¼šå¯ç”¨</span>
              </div>
              <div class="timeline mt8">
                <div class="step">
                  <div class="dot"></div>
                  <div class="content">
                    <div class="between">
                      <h4>æå‰ 30 å¤©</h4>
                      <span class="chip">ğŸ§¾ ç»­è´¹é¢„è­¦å•</span>
                    </div>
                    <p class="meta">ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¹¶åŒæ­¥è‡³æ•™ç»ƒåå°/å­¦é™¢ç«¯</p>
                    <div class="actions">
                      <button class="btn ghost" onclick="alert('å·²åŒæ­¥è‡³æ•™ç»ƒå’Œå­¦é™¢ç«¯ï¼ˆæ¨¡æ‹Ÿï¼‰')">åŒæ­¥</button>
                      <button class="btn" onclick="toast('å·²åˆ›å»ºé¢„è­¦å•ï¼ˆæ¨¡æ‹Ÿï¼‰')">ç”Ÿæˆé¢„è­¦å•</button>
                    </div>
                  </div>
                </div>
                <div class="step">
                  <div class="dot"></div>
                  <div class="content">
                    <div class="between">
                      <h4>æå‰ 15 å¤©</h4>
                      <span class="chip" data-kind="warning">â³ ä¼˜æƒ å€’è®¡æ—¶</span>
                    </div>
                    <p class="meta">å‘å®¶é•¿æ¨é€ç»­è´¹é€šçŸ¥ + è‡ªåŠ¨æ¨é€â€œç»­è´¹ä¼˜æƒ å€’è®¡æ—¶â€</p>
                    <div class="actions">
                      <button class="btn" onclick="toast('å·²æ¨é€ç»­è´¹é€šçŸ¥ï¼ˆæ¨¡æ‹Ÿï¼‰')">æ¨é€é€šçŸ¥</button>
                      <button class="btn ghost" onclick="toast('å€’è®¡æ—¶å·²å¼€å¯ï¼ˆæ¨¡æ‹Ÿï¼‰')">å¼€å¯å€’è®¡æ—¶</button>
                    </div>
                  </div>
                </div>
                <div class="step">
                  <div class="dot"></div>
                  <div class="content">
                    <div class="between">
                      <h4>æå‰ 7 å¤©</h4>
                      <span class="chip" data-kind="danger">â— é‡ç‚¹è·Ÿè¿›</span>
                    </div>
                    <p class="meta">æ•™ç»ƒæ”¶åˆ°æé†’ï¼Œæ”¯æŒæ ‡è®°â€œå·²æ²Ÿé€šâ€çŠ¶æ€</p>
                    <div class="actions">
                      <button class="btn" onclick="openSheet('sheetFollow')">æ ‡è®°å·²æ²Ÿé€š</button>
                      <button class="btn ghost" onclick="navigate('students')">æŸ¥çœ‹å¾…ç»­è´¹å­¦ç”Ÿ</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="kpi">
              <div class="item">
                <h3 id="kpiConv">68%</h3>
                <p>è¿‘30å¤© ç»­è´¹è½¬åŒ–ç‡</p>
              </div>
              <div class="item">
                <h3 id="kpiAvg">4.2å¤©</h3>
                <p>å¹³å‡ç»­æŠ¥æ—¶é•¿</p>
              </div>
              <div class="item">
                <h3 id="kpiOverdue">12</h3>
                <p>è¶…æœŸæœªç»­ å­¦å‘˜</p>
              </div>
            </div>

            <div class="card mt12">
              <div class="between">
                <h2 style="font-size:16px;">å¤šè§’è‰²ååŒæé†’ <span class="muted sm">Multiâ€‘role</span></h2>
                <button class="btn ghost" onclick="navigate('insights')">æŸ¥çœ‹çœ‹æ¿</button>
              </div>
              <div class="grid3 mt8">
                <div class="plan">
                  <strong>æ•™ç»ƒç«¯</strong>
                  <span class="muted xs">å¾…ç»­è´¹åˆ—è¡¨ / è¯æœ¯ / æ´½è°ˆé¢„çº¦</span>
                  <button class="btn" onclick="navigate('students')">è¿›å…¥</button>
                </div>
                <div class="plan">
                  <strong>å­¦é™¢ç«¯</strong>
                  <span class="muted xs">ç»­è´¹è¿›åº¦ / è¶…æœŸé¢„è­¦</span>
                  <button class="btn" onclick="navigate('insights')">è¿›å…¥</button>
                </div>
                <div class="plan">
                  <strong>å®¶é•¿ç«¯</strong>
                  <span class="muted xs">æ–¹æ¡ˆæ¨è / åœ¨çº¿ç¼´è´¹</span>
                  <button class="btn" onclick="navigate('parents')">è¿›å…¥</button>
                </div>
              </div>
            </div>
          </section>

          <!-- View: Students (Coach) -->
          <section class="view" data-view="students" hidden>
            <div class="tools">
              <div class="input w100"><span>ğŸ”</span><input id="q" type="text" placeholder="æœç´¢å­¦å‘˜/ç­çº§â€¦" style="background:transparent;border:none;outline:none;width:100%"></div>
              <div class="seg">
                <button class="active" data-filter="all">å…¨éƒ¨</button>
                <button data-filter="high">é«˜æ„å‘</button>
                <button data-filter="mid">çŠ¹è±«</button>
                <button data-filter="low">ä½æ„å‘</button>
              </div>
            </div>

            <div id="studentList" class="list"></div>

            <button class="fab" title="æ•™ç»ƒèµ‹èƒ½å·¥å…·ç®±" onclick="openSheet('sheetToolbox')">ğŸ§°</button>
          </section>

          <!-- View: Parents -->
          <section class="view" data-view="parents" hidden>
            <div class="card">
              <h2 style="font-size:16px;">ä¸ªæ€§åŒ–ç»­è´¹æ–¹æ¡ˆæ¨è <span class="muted sm">Personalized plans</span></h2>
              <div class="grid3 mt8">
                <label class="plan">
                  <div class="between">
                    <div class="radio"><input type="radio" name="plan" checked><strong>å¥—é¤ A</strong></div>
                    <span class="chip" data-kind="success">ğŸ é•¿æœŸä¼˜æƒ </span>
                  </div>
                  <div class="between">
                    <span class="muted xs">12 ä¸ªæœˆ Â· 48 è¯¾æ—¶</span>
                    <strong>Â¥ 9,999</strong>
                  </div>
                </label>
                <label class="plan">
                  <div class="between">
                    <div class="radio"><input type="radio" name="plan"><strong>å¥—é¤ B</strong></div>
                    <span class="chip" data-kind="primary">ğŸ”¥ çƒ­è</span>
                  </div>
                  <div class="between">
                    <span class="muted xs">6 ä¸ªæœˆ Â· 24 è¯¾æ—¶</span>
                    <strong>Â¥ 5,499</strong>
                  </div>
                </label>
                <label class="plan">
                  <div class="between">
                    <div class="radio"><input type="radio" name="plan"><strong>å¥—é¤ C</strong></div>
                    <span class="chip" data-kind="accent">ğŸ‘ª å›¢è´­</span>
                  </div>
                  <div class="between">
                    <span class="muted xs">3 ä¸ªæœˆ Â· 12 è¯¾æ—¶</span>
                    <strong>Â¥ 2,999</strong>
                  </div>
                </label>
              </div>
            </div>

            <div class="card mt12">
              <div class="between">
                <h2 style="font-size:16px;">åœ¨çº¿ç¼´è´¹å…¥å£ <span class="muted sm">Payment</span></h2>
                <div class="seg">
                  <button class="active" id="fullPayBtn">å…¨æ¬¾</button>
                  <button id="instalBtn">åˆ†æœŸ</button>
                </div>
              </div>
              <div class="payments mt8" id="payMethods">
                <div class="method active" data-method="wechat">ğŸ’š å¾®ä¿¡æ”¯ä»˜</div>
                <div class="method" data-method="alipay">ğŸ’™ æ”¯ä»˜å®</div>
                <div class="method" data-method="bank">ğŸ¦ é“¶è¡Œå¡</div>
                <div class="method" data-method="chain">â›“ï¸ åŒºå—é“¾</div>
              </div>
              <p class="hint mt8">â€œ7å¤©æ»¡æ„ä¿éšœâ€ï¼šä¸æ»¡æ„å¯é€€å‰©ä½™è´¹ç”¨ Â· é™ä½å†³ç­–é—¨æ§›</p>
              <button class="btn w100 mt8" onclick="toast('å·²åˆ›å»ºæ”¯ä»˜é“¾æ¥ï¼ˆæ¨¡æ‹Ÿï¼‰')">ç”Ÿæˆæ”¯ä»˜é“¾æ¥</button>
            </div>

            <div class="card mt12">
              <div class="between">
                <h2 style="font-size:16px;">å®¶é•¿å†³ç­–æ”¯æŒä¸­å¿ƒ <span class="muted sm">Decision support</span></h2>
                <button class="btn ghost" onclick="openSheet('sheetTestimonial')">æŸ¥çœ‹è¯è¨€</button>
              </div>
              <div class="grid2 mt8">
                <div class="plan">
                  <strong>åœ¨çº¿è¯•å¬ä½“éªŒ</strong>
                  <span class="muted xs">å¯¹çŠ¹è±«å®¶é•¿å¼€æ”¾ 1 èŠ‚é«˜é˜¶è¯¾ç¨‹æ—å¬</span>
                  <button class="btn" onclick="toast('å·²é¢„çº¦è¯•å¬ï¼ˆæ¨¡æ‹Ÿï¼‰')">é¢„çº¦</button>
                </div>
                <div class="plan">
                  <strong>å‡å­¦é‡Œç¨‹ç¢‘å€’è®¡æ—¶</strong>
                  <span class="muted xs">å…³è”ç›®æ ‡é™¢æ ¡ï¼Œä¼°ç®—è®­ç»ƒæ—¶é•¿</span>
                  <button class="btn" onclick="openSheet('sheetCountdown')">è®¾ç½®</button>
                </div>
              </div>
            </div>
          </section>

          <!-- View: Insights (College dashboard) -->
          <section class="view" data-view="insights" hidden>
            <div class="card">
              <div class="between">
                <h2 style="font-size:16px;">ç»­è´¹çŠ¶æ€è·Ÿè¸ª <span class="muted sm">Status tracking</span></h2>
                <button class="btn ghost" onclick="refreshInsights()">åˆ·æ–°</button>
              </div>

              <div class="grid1 mt8">
                <div>
                  <div class="between"><span class="sm">å¾…æé†’</span><span class="sm" id="s0p">22</span></div>
                  <div class="bar mt4"><i id="s0" style="width:40%"></i></div>
                </div>
                <div>
                  <div class="between"><span class="sm">å·²æé†’</span><span class="sm" id="s1p">40</span></div>
                  <div class="bar mt4"><i id="s1" style="width:68%"></i></div>
                </div>
                <div>
                  <div class="between"><span class="sm">æ²Ÿé€šä¸­</span><span class="sm" id="s2p">30</span></div>
                  <div class="bar mt4"><i id="s2" style="width:52%"></i></div>
                </div>
                <div>
                  <div class="between"><span class="sm">å¾…ç¼´è´¹</span><span class="sm" id="s3p">16</span></div>
                  <div class="bar mt4"><i id="s3" style="width:30%"></i></div>
                </div>
                <div>
                  <div class="between"><span class="sm">å·²å®Œæˆ</span><span class="sm" id="s4p">48</span></div>
                  <div class="bar mt4"><i id="s4" style="width:72%"></i></div>
                </div>
                <div>
                  <div class="between"><span class="sm">è¶…æœŸæœªç»­ï¼ˆè‡ªåŠ¨å˜è‰²ï¼‰</span><span class="sm" id="s5p">12</span></div>
                  <div class="bar mt4"><i id="s5" style="width:18%; background: var(--danger);"></i></div>
                </div>
              </div>
            </div>

            <div class="grid2 mt12">
              <div class="card">
                <h3 style="font-size:14px;">ç»Ÿè®¡åˆ†æ <span class="muted xs">Conversion & Duration</span></h3>
                <div class="between mt8">
                  <div class="ring" id="ringConv" style="--val:68;"><span>68%</span></div>
                  <div class="ring" id="ringAvg" style="--val:42;"><span>4.2å¤©</span></div>
                  <div class="ring" id="ringMatch" style="--val:76;"><span>76%</span></div>
                </div>
                <p class="hint mt8">æŒ‰æ—¶é—´æ®µç»Ÿè®¡â€œç»­è´¹è½¬åŒ–ç‡â€â€œå¹³å‡ç»­æŠ¥æ—¶é•¿â€ï¼›å¥—é¤åŒ¹é…åº¦ç”¨äºè¾…åŠ©ä¼˜åŒ–äº§å“è®¾è®¡ã€‚</p>
              </div>
              <div class="card">
                <h3 style="font-size:14px;">æµå¤±é£é™©é¢„è­¦ <span class="muted xs">Churn risk</span></h3>
                <div id="riskList" class="list mt8"></div>
                <p class="hint mt8">ç³»ç»Ÿæ ¹æ®æ‰“å¡ç‡ã€å›å¤é€Ÿåº¦ã€è¯·å‡é¢‘ç‡ç­‰ç”Ÿæˆé£é™©è¯„åˆ†ï¼Œå¹¶ç»™å‡ºå¹²é¢„æ—¶æœºå»ºè®®ã€‚</p>
              </div>
            </div>

            <div class="card mt12">
              <div class="between">
                <h3 style="font-size:14px;">ç»­è´¹ä»·å€¼è®¡ç®—å™¨ <span class="muted xs">ROI Calculator</span></h3>
                <div class="seg">
                  <button class="active" data-roi="kpi">æŠ€æœ¯æŒ‡æ ‡</button>
                  <button data-roi="event">èµ›äº‹ç­‰çº§</button>
                  <button data-roi="value">æ¯è¯¾æ—¶æå‡å€¼</button>
                </div>
              </div>
              <div class="mt8">
                <label class="sm muted">ç»­æŠ¥æ—¶é•¿ï¼ˆä¸ªæœˆï¼‰</label>
                <input id="months" type="range" min="1" max="18" value="6" style="width:100%"/>
                <div class="between">
                  <span class="sm">1</span>
                  <strong id="mVal">6</strong>
                  <span class="sm">18</span>
                </div>
                <div id="roiOutput" class="kpi mt8">
                  <div class="item">
                    <h3 id="techUp">+12%</h3>
                    <p>é¢„è®¡æå‡çš„æŠ€æœ¯æŒ‡æ ‡</p>
                  </div>
                  <div class="item">
                    <h3 id="eventLevel">å¸‚çº§</h3>
                    <p>å¯å‚ä¸çš„èµ›äº‹ç­‰çº§</p>
                  </div>
                  <div class="item">
                    <h3 id="perHour">+1.8%</h3>
                    <p>æ¯è¯¾æ—¶æŠ€æœ¯æå‡å€¼</p>
                  </div>
                </div>
                <div class="grid2 mt8">
                  <div class="plan">
                    <strong>æœºä¼šæˆæœ¬å¯¹æ¯”</strong>
                    <p class="xs">åœè®­ 3 ä¸ªæœˆï¼šéƒ¨åˆ†æŠ€æœ¯æŒ‡æ ‡å¯èƒ½å€’é€€ 6â€“10%</p>
                    <p class="xs">æŒç»­è®­ç»ƒï¼šå‡å­¦/é€‰æ‹”èµ›ä¼˜åŠ¿å¢å¼º</p>
                  </div>
                  <div class="plan">
                    <strong>ä¸ªæ€§åŒ– ROI æŠ¥å‘Š</strong>
                    <p class="xs">ç»“åˆå†å²è¿›æ­¥é€Ÿåº¦ï¼Œç”ŸæˆæŠ¥å‘Šï¼ˆåŸå‹å±•ç¤ºï¼‰</p>
                    <button class="btn mt8" onclick="toast('å·²ç”Ÿæˆ ROI æŠ¥å‘Šï¼ˆæ¨¡æ‹Ÿï¼‰')">ç”ŸæˆæŠ¥å‘Š</button>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- View: Me / Settings -->
          <section class="view" data-view="me" hidden>
            <div class="card">
              <h2 style="font-size:16px;">ç³»ç»Ÿç­–ç•¥ / å®‰å…¨</h2>
              <div class="grid1 mt8">
                <label class="plan">
                  <div class="between"><strong>è¶…æœŸæœªç»­é¢„è­¦</strong><label class="switch"><input type="checkbox" checked></label></div>
                  <p class="xs muted">è¿ç»­ 3 å¤©æœªå¤„ç†è‡ªåŠ¨å‡çº§æé†’</p>
                </label>
                <label class="plan">
                  <div class="between"><strong>éšç§ä¸åˆè§„</strong><span class="chip">GDPR/æœ¬åœ°ç­‰ä»·</span></div>
                  <p class="xs muted">æœ¬åŸå‹ä»…æ¼”ç¤ºç•Œé¢äº¤äº’ï¼Œä¸æ”¶é›†çœŸå®æ•°æ®ã€‚</p>
                </label>
                <label class="plan">
                  <div class="between"><strong>é€šçŸ¥æ—¶é—´çª—</strong><span class="muted xs">19:00â€“21:00</span></div>
                  <p class="xs muted">ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­æœ€ä½³æ²Ÿé€šèŠ‚ç‚¹ï¼Œé¿å…æ‰“æ‰°ã€‚</p>
                </label>
              </div>
            </div>
          </section>
        </main>

        <nav class="tabbar">
          <button class="active" data-nav="home"><i>ğŸ </i><span class="xs">æ€»è§ˆ</span></button>
          <button data-nav="students"><i>ğŸ¯</i><span class="xs">å­¦å‘˜</span></button>
          <button data-nav="parents"><i>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</i><span class="xs">å®¶é•¿</span></button>
          <button data-nav="insights"><i>ğŸ“ˆ</i><span class="xs">çœ‹æ¿</span></button>
          <button data-nav="me"><i>âš™ï¸</i><span class="xs">æˆ‘çš„</span></button>
        </nav>
      </div>
    </div>
  </div>

  <!-- Sheet: æ ‡è®°å·²æ²Ÿé€š -->
  <dialog id="sheetFollow" class="sheet">
    <header class="between">
      <strong>æ ‡è®°â€œå·²æ²Ÿé€šâ€</strong>
      <button class="btn ghost" onclick="closeSheet('sheetFollow')">å…³é—­</button>
    </header>
    <main>
      <div class="grid1">
        <label>æ²Ÿé€šè®°å½•æ¨¡æ¿</label>
        <textarea id="commNote" rows="5" placeholder="è¯¾ç¨‹äº®ç‚¹å›é¡¾ã€ç»­æŠ¥ç¦åˆ©ã€å­¦ç”Ÿè¿›æ­¥å¹…åº¦â€¦"></textarea>
        <div class="grid2">
          <input type="date" id="commDate" />
          <input type="time" id="commTime" />
        </div>
      </div>
    </main>
    <footer>
      <button class="btn ghost" onclick="closeSheet('sheetFollow')">å–æ¶ˆ</button>
      <button class="btn" onclick="saveFollow()">ä¿å­˜</button>
    </footer>
  </dialog>

  <!-- Sheet: æ•™ç»ƒèµ‹èƒ½å·¥å…·ç®± -->
  <dialog id="sheetToolbox" class="sheet">
    <header class="between">
      <strong>æ•™ç»ƒèµ‹èƒ½å·¥å…·ç®±</strong>
      <button class="btn ghost" onclick="closeSheet('sheetToolbox')">å…³é—­</button>
    </header>
    <main>
      <div class="grid1">
        <div class="plan">
          <strong>ä¸ªæ€§åŒ–æ²Ÿé€šå‰§æœ¬</strong>
          <div class="grid2 mt8">
            <select id="parentType">
              <option value="price">ä»·æ ¼æ•æ„Ÿå‹å®¶é•¿</option>
              <option value="busy">æ—¶é—´ç´§å¼ å‹å®¶é•¿</option>
              <option value="quality">æ³¨é‡è´¨é‡å‹å®¶é•¿</option>
              <option value="hesitant">çŠ¹è±«è§‚æœ›å‹å®¶é•¿</option>
            </select>
            <select id="studentFocus">
              <option value="tech">æŠ€æœ¯è¿›æ­¥</option>
              <option value="interest">å…´è¶£åŸ¹å…»</option>
              <option value="discipline">è‡ªå¾‹æˆé•¿</option>
            </select>
          </div>
          <textarea id="scriptOut" rows="6" class="mt8" placeholder="ç‚¹å‡»ä¸‹é¢çš„ç”ŸæˆæŒ‰é’®è·å¾—é’ˆå¯¹æ€§è¯æœ¯â€¦"></textarea>
          <div class="between mt8">
            <button class="btn" onclick="genScript()">ç”Ÿæˆè¯æœ¯</button>
            <button class="btn ghost" onclick="copyText('scriptOut')">å¤åˆ¶</button>
          </div>
        </div>

        <div class="plan">
          <strong>ç»­è´¹æ´½è°ˆæ•°æ®çœ‹æ¿</strong>
          <div class="kpi mt8">
            <div class="item">
              <h3 id="kpiCr">72%</h3>
              <p>æœ¬å‘¨ è½¬åŒ–ç‡</p>
            </div>
            <div class="item">
              <h3 id="kpiSpeed">2.8å¤©</h3>
              <p>å¹³å‡é¦–å“æ—¶é—´</p>
            </div>
            <div class="item">
              <h3 id="kpiFaq">5æ¡</h3>
              <p>å®¶é•¿é«˜é¢‘é—®é¢˜</p>
            </div>
          </div>
          <details class="mt8">
            <summary>æ¨èå¥—é¤åŒ¹é…åº¦è¯´æ˜</summary>
            <p class="xs">åŸºäºè¿‘ 3 æ¬¡è¯¾ç¨‹è¡¨ç°ä¸å®¶é•¿åå¥½ï¼Œå½“å‰ç­å‹åŒ¹é…åº¦ 76%ã€‚</p>
          </details>
        </div>

        <div class="plan">
          <strong>é¢„çº¦ä¸“å±æ´½è°ˆæ—¶æ®µ</strong>
          <div class="grid2 mt8">
            <input type="date" id="aptDate" />
            <input type="time" id="aptTime" />
          </div>
          <div class="seg mt8">
            <button class="active">é»„é‡‘æ—¶æ®µ 19:00-21:00</button>
            <button>å·¥ä½œæ—¥åˆä¼‘ 12:00-13:30</button>
          </div>
          <button class="btn mt8" onclick="toast('å·²å‘é€é¢„çº¦æé†’ç»™å®¶é•¿ï¼ˆæ¨¡æ‹Ÿï¼‰')">å‘é€æé†’</button>
        </div>
      </div>
    </main>
    <footer>
      <button class="btn ghost" onclick="closeSheet('sheetToolbox')">å®Œæˆ</button>
    </footer>
  </dialog>

  <!-- Sheet: Testimonial -->
  <dialog id="sheetTestimonial" class="sheet">
    <header class="between">
      <strong>è€å­¦å‘˜è¯è¨€åº“</strong>
      <button class="btn ghost" onclick="closeSheet('sheetTestimonial')">å…³é—­</button>
    </header>
    <main>
      <div class="between">
        <select id="selRegion">
          <option>å…¨éƒ¨åœ°åŒº</option><option>ååŒ—</option><option>åä¸œ</option><option>åå—</option>
        </select>
        <select id="selAge">
          <option>å…¨éƒ¨å¹´é¾„æ®µ</option><option>6-8å²</option><option>9-11å²</option><option>12-15å²</option>
        </select>
      </div>
      <div class="grid2 mt8">
        <div class="plan">
          <strong>è§†é¢‘è¯è¨€ Â· ç‹å¥³å£«</strong>
          <p class="xs">åä¸œ Â· 9å² Â· 6 ä¸ªæœˆæå‡æ˜¾è‘—</p>
          <button class="btn mt8" onclick="toast('æ’­æ”¾æ¼”ç¤ºè§†é¢‘â€¦')">æ’­æ”¾</button>
        </div>
        <div class="plan">
          <strong>è§†é¢‘è¯è¨€ Â· æå…ˆç”Ÿ</strong>
          <p class="xs">ååŒ— Â· 12å² Â· èµ›äº‹å…¥å›´</p>
          <button class="btn mt8" onclick="toast('æ’­æ”¾æ¼”ç¤ºè§†é¢‘â€¦')">æ’­æ”¾</button>
        </div>
      </div>
    </main>
    <footer>
      <button class="btn ghost" onclick="closeSheet('sheetTestimonial')">å…³é—­</button>
    </footer>
  </dialog>

  <!-- Sheet: Countdown -->
  <dialog id="sheetCountdown" class="sheet">
    <header class="between">
      <strong>å‡å­¦é‡Œç¨‹ç¢‘å€’è®¡æ—¶</strong>
      <button class="btn ghost" onclick="closeSheet('sheetCountdown')">å…³é—­</button>
    </header>
    <main>
      <div class="grid1">
        <label>ç›®æ ‡é™¢æ ¡</label>
        <input id="targetSchool" type="text" placeholder="è¯·è¾“å…¥ç›®æ ‡é™¢æ ¡â€¦" />
        <label class="mt8">é¢„è®¡æ‰€éœ€è®­ç»ƒæ—¶é—´ï¼ˆæœˆï¼‰</label>
        <input id="targetMonths" type="number" min="1" max="36" value="9" />
        <p class="hint mt8">ç»­æŠ¥åç³»ç»Ÿå°†è‡ªåŠ¨æ›´æ–°å€’è®¡æ—¶ã€‚</p>
      </div>
    </main>
    <footer>
      <button class="btn ghost" onclick="closeSheet('sheetCountdown')">å–æ¶ˆ</button>
      <button class="btn" onclick="toast('å·²ä¿å­˜ç›®æ ‡ä¸å€’è®¡æ—¶ï¼ˆæ¨¡æ‹Ÿï¼‰'); closeSheet('sheetCountdown')">ä¿å­˜</button>
    </footer>
  </dialog>

  <script>
    // --- Tiny toast ---
    function toast(msg) {
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.position = 'fixed';
      t.style.left = '50%';
      t.style.bottom = '90px';
      t.style.transform = 'translateX(-50%)';
      t.style.background = 'var(--frost)';
      t.style.backdropFilter = 'blur(8px)';
      t.style.border = '1px solid var(--border)';
      t.style.padding = '10px 14px';
      t.style.borderRadius = '10px';
      t.style.zIndex = '99';
      document.body.appendChild(t);
      setTimeout(() => { t.remove(); }, 1600);
    }

    // --- Simple router ---
    const views = document.querySelectorAll('.view');
    const tabs = document.querySelectorAll('.tabbar button');
    function navigate(name) {
      views.forEach(v => v.hidden = v.dataset.view !== name);
      tabs.forEach(b => b.classList.toggle('active', b.dataset.nav === name));
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    tabs.forEach(b => b.addEventListener('click', () => navigate(b.dataset.nav)));

    // --- Sheets helpers ---
    function openSheet(id){ document.getElementById(id).showModal(); }
    function closeSheet(id){ document.getElementById(id).close(); }

    // --- Save follow-up (mock) ---
    function saveFollow(){
      const note = document.getElementById('commNote').value.trim();
      if (!note) return toast('è¯·å…ˆå¡«å†™æ²Ÿé€šè®°å½•');
      localStorage.setItem('lastFollow', JSON.stringify({
        note, date: document.getElementById('commDate').value, time: document.getElementById('commTime').value
      }));
      toast('å·²ä¿å­˜æ²Ÿé€šè®°å½•');
      closeSheet('sheetFollow');
    }

    // --- Students data (mock) ---
    const students = [
      { name: 'å¼ æ™¨', class: 'A1', daysLeft: 7, intention: 92, status: 'æ²Ÿé€šä¸­', progress: ['æ ¸å¿ƒåŠ›é‡+12%', 'ç«™å§¿ç¨³å®šæ€§+9%', 'æ¨æ†ç²¾å‡†åº¦+8%'], faq:  ['æ˜¯å¦æœ‰é•¿æœŸä¼˜æƒ ï¼Ÿ','èƒ½å¦å‘¨æœ«ä¸Šè¯¾ï¼Ÿ'], match: 84, risk: 12, factors: {checkin: 0.92, reply: 'å¿«', leave: 'ä½'} },
      { name: 'æ—ä¸€', class: 'B2', daysLeft: 15, intention: 68, status: 'å·²æé†’', progress: ['ä¸Šæ†èŠ‚å¥+7%','çŸ­è·ç¦»æ§åˆ¶+5%','å¿ƒç†ç¨³å®šæ€§+4%'], faq: ['è¯¾è¡¨èƒ½å¦è°ƒæ™šï¼Ÿ'], match: 72, risk: 28, factors: {checkin: 0.76, reply: 'ä¸­', leave: 'ä¸­'} },
      { name: 'ç‹å­å¢¨', class: 'C1', daysLeft: 30, intention: 38, status: 'å¾…æé†’', progress: ['åŸºæœ¬åŠ¨ä½œ+3%','ä½“èƒ½+2%','ä¸“æ³¨åº¦+2%'], faq: ['æœ‰å›¢è´­å—ï¼Ÿ','æ˜¯å¦æ”¯æŒåˆ†æœŸï¼Ÿ'], match: 55, risk: 64, factors: {checkin: 0.42, reply: 'æ…¢', leave: 'é«˜'} },
      { name: 'èµµè‹¥å—', class: 'A2', daysLeft: 3, intention: 88, status: 'å¾…ç¼´è´¹', progress: ['å‡»çƒç¨³å®š+11%','çƒé“é€‰æ‹©+6%','ç­–ç•¥æ„è¯†+8%'], faq: ['å®¶é•¿è¯¾å ‚æœ‰å—ï¼Ÿ'], match: 78, risk: 18, factors: {checkin: 0.81, reply: 'å¿«', leave: 'ä½'} },
      { name: 'å‘¨è¡¡', class: 'D3', daysLeft: 20, intention: 52, status: 'å·²æé†’', progress: ['æŒ¥æ†é€Ÿåº¦+6%','æ ¸å¿ƒåŠ›é‡+4%','æŸ”éŸ§æ€§+5%'], faq: ['èƒ½ä¸Šé«˜é˜¶ç­å—ï¼Ÿ'], match: 67, risk: 41, factors: {checkin: 0.58, reply: 'ä¸­', leave: 'ä¸­'} },
      { name: 'é™ˆå¯', class: 'A1', daysLeft: 18, intention: 27, status: 'æ²Ÿé€šä¸­', progress: ['æ­¥ä¼åè°ƒ+2%','åŸºç¡€èŠ‚å¥+1%','ä¸“æ³¨åº¦+1%'], faq: ['æ˜¯å¦èƒ½åœè¯¾ä¿ç•™ï¼Ÿ'], match: 49, risk: 72, factors: {checkin: 0.31, reply: 'æ…¢', leave: 'é«˜'} }
    ];

    const listEl = document.getElementById('studentList');
    const segBtns = document.querySelectorAll('.seg button[data-filter]');
    const q = document.getElementById('q');

    function renderStudents() {
      const filter = [...segBtns].find(b => b.classList.contains('active'))?.dataset.filter || 'all';
      const term = q.value.trim().toLowerCase();
      listEl.innerHTML = '';

      students
        .filter(s => {
          const typ = s.intention >= 90 ? 'high' : s.intention >= 50 ? 'mid' : 'low';
          const byType = filter === 'all' || filter === typ;
          const byTerm = !term || s.name.toLowerCase().includes(term) || s.class.toLowerCase().includes(term);
          return byType && byTerm;
        })
        .sort((a,b) => a.daysLeft - b.daysLeft)
        .forEach((s,i) => {
          const typ = s.intention >= 90 ? 'high' : s.intention >= 50 ? 'mid' : 'low';
          const statusColor = s.status.includes('è¶…æœŸ') ? 'danger' : s.status.includes('å®Œæˆ') ? 'success' : 'primary';
          const card = document.createElement('div');
          card.className = 'student';
          card.innerHTML = `
            <div class="avatar">${s.name.slice(-2)}</div>
            <div>
              <div class="between">
                <div>
                  <h4>${s.name} Â· ${s.class}</h4>
                  <div class="row sm muted"><span>å‰©ä½™ <strong>${s.daysLeft}</strong> å¤©</span> Â· <span>${s.factors.reply}å›å¤ Â· æ‰“å¡${Math.round(s.factors.checkin*100)}%</span></div>
                </div>
                <span class="pill" data-type="${typ}">${s.intention}%</span>
              </div>
              <div class="row mt8">
                <span class="chip" data-kind="${statusColor}">${s.status}</span>
                <span class="chip" data-kind="${s.risk>=60?'danger':s.risk>=30?'warning':'success'}">é£é™© ${s.risk}</span>
                <span class="chip" data-kind="accent">åŒ¹é…åº¦ ${s.match}%</span>
              </div>
              <div class="actions">
                <button class="btn mini" onclick="openScriptFor('${s.name}')">æ²Ÿé€šå‰§æœ¬</button>
                <button class="btn ghost mini" onclick="openSheet('sheetToolbox')">é¢„çº¦æ´½è°ˆ</button>
                <button class="btn ghost mini" onclick="markTalked(${i})">æ ‡è®°å·²æ²Ÿé€š</button>
              </div>
            </div>
            <div>
              <button class="btn ghost mini" onclick="/* placeholder */">â€¦</button>
            </div>
            <details class="student-extra mt8">
              <summary>å±•å¼€ Â· è¿›æ­¥ç‚¹ / FAQ / æ¨èå¥—é¤</summary>
              <div class="grid3 mt8">
                <div class="plan"><strong>3 å¤§è¿›æ­¥ç‚¹</strong><p class="xs">${s.progress.join(' Â· ')}</p></div>
                <div class="plan"><strong>å®¶é•¿é«˜é¢‘é—®é¢˜</strong><p class="xs">${s.faq.join(' Â· ')}</p></div>
                <div class="plan"><strong>æ¨èå¥—é¤åŒ¹é…åº¦</strong><p class="xs">${s.match}% Â· å»ºè®®ï¼š${s.match>75?'A':'B'} å¥—é¤</p></div>
              </div>
            </details>
          `;
          listEl.appendChild(card);
        });
    }
    renderStudents();
    segBtns.forEach(b => b.addEventListener('click', () => { segBtns.forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderStudents(); }));
    q.addEventListener('input', renderStudents);

    function markTalked(idx){
      students[idx].status = 'å·²æ²Ÿé€š';
      toast('å·²æ ‡è®°ä¸ºå·²æ²Ÿé€š');
      renderStudents();
    }

    function openScriptFor(name){
      openSheet('sheetToolbox');
      document.getElementById('scriptOut').value = `ã€${name}ã€‘æ²Ÿé€šè¦ç‚¹ï¼š\\n1) å›é¡¾è¿‘æœŸ 3 å¤§è¿›æ­¥ç‚¹ï¼›\\n2) å¼ºè°ƒå®¶é•¿æœŸæœ›ï¼›\\n3) æ¨èåŒ¹é…åº¦æœ€é«˜çš„å¥—é¤å¹¶è¯´æ˜ 7 å¤©æ»¡æ„ä¿éšœã€‚`;
    }

    function copyText(id){
      const el = document.getElementById(id);
      el.select(); document.execCommand('copy'); toast('å·²å¤åˆ¶');
    }

    function genScript(){
      const type = document.getElementById('parentType').value;
      const focus = document.getElementById('studentFocus').value;
      let opener = '';
      if (type==='price') opener = 'å…³äºè´¹ç”¨ï¼Œæˆ‘ä»¬å‡†å¤‡äº†å›¢è´­ä¸é•¿æœŸç»­è´¹åŒé‡ä¼˜æƒ ï¼›';
      if (type==='busy') opener = 'è€ƒè™‘åˆ°æ‚¨æ—¶é—´ç´§ï¼Œæˆ‘ä»¬å¯ä¼˜å…ˆå®‰æ’æ™šé—´é»„é‡‘æ—¶æ®µæˆ–å‘¨æœ«é›†ä¸­ç­ï¼›';
      if (type==='quality') opener = 'æˆ‘ä»¬ä¼šå±•ç¤ºå­©å­åœ¨æ ¸å¿ƒæŠ€æœ¯æ¨¡å—çš„é‡åŒ–è¿›æ­¥æ›²çº¿ï¼›';
      if (type==='hesitant') opener = 'å¯å…ˆå®‰æ’ 1 èŠ‚é«˜é˜¶è¯¾ç¨‹æ—å¬ï¼Œé™ä½å†³ç­–é—¨æ§›ï¼›';

      const focusTxt = {
        tech: 'çªå‡ºæŠ€æœ¯è¿›æ­¥ï¼ˆå¦‚æŒ¥æ†ç¨³å®šã€æ¨æ†ç²¾å‡†ï¼‰ä¸åç»­ç›®æ ‡ã€‚',
        interest: 'å¼ºè°ƒå­¦ä¹ æ°›å›´ä¸å…´è¶£åŸ¹å…»ï¼Œä¿æŒé•¿æœŸå†…é©±ã€‚',
        discipline: 'å±•ç¤ºæ‰“å¡ç‡ä¸è‡ªå¾‹æˆé•¿å¯¹å­¦ä¹ æˆç»©çš„æ­£å‘å½±å“ã€‚'
      }[focus];

      document.getElementById('scriptOut').value = `å¼€åœºï¼š${opener}
æ ¸å¿ƒï¼š${focusTxt}
æ–¹æ¡ˆï¼šä¼˜å…ˆæ¨èåŒ¹é…åº¦ 75%+ çš„å¥—é¤ï¼Œå¹¶è¯´æ˜â€œ7å¤©æ»¡æ„ä¿éšœï¼›ä¸æ»¡æ„å¯é€€å‰©ä½™è´¹ç”¨â€ã€‚
æé†’ï¼šç»­è´¹ä¼˜æƒ å€’è®¡æ—¶è¿›è¡Œä¸­ï¼ŒæŠ“ä½æœ¬å‘¨é»„é‡‘æ—¶æ®µï¼ˆ19:00â€“21:00ï¼‰ã€‚`;
    }

    // --- Payment toggles ---
    const payMethods = document.getElementById('payMethods');
    payMethods.addEventListener('click', (e) => {
      const m = e.target.closest('.method'); if (!m) return;
      [...payMethods.children].forEach(x => x.classList.toggle('active', x===m));
      if (m.dataset.method==='chain') toast('åŒºå—é“¾æ”¯ä»˜ä¸ºç¤ºæ„é¡¹ï¼ŒçœŸå®ä¸šåŠ¡è¯·è¯„ä¼°åˆè§„ä¸æˆæœ¬');
    });
    document.getElementById('fullPayBtn').addEventListener('click', (e)=>{
      e.target.classList.add('active'); document.getElementById('instalBtn').classList.remove('active'); toast('å·²é€‰æ‹©å…¨æ¬¾');
    });
    document.getElementById('instalBtn').addEventListener('click', (e)=>{
      e.target.classList.add('active'); document.getElementById('fullPayBtn').classList.remove('active'); toast('å·²é€‰æ‹©åˆ†æœŸ');
    });

    // --- Insights dynamic ---
    function refreshInsights(){
      const rand = (base) => Math.max(5, Math.min(95, Math.round(base + (Math.random()*10-5))));
      const conv = rand(68), avgDays = Math.max(2.0, Math.min(8.0, (Math.random()*2-1) + 4.2)).toFixed(1);
      document.getElementById('kpiConv').textContent = conv + '%';
      document.getElementById('kpiAvg').textContent = avgDays + 'å¤©';
      document.getElementById('ringConv').style.setProperty('--val', conv);
      document.getElementById('ringAvg').style.setProperty('--val', Math.round(parseFloat(avgDays)*10));
      ['s0','s1','s2','s3','s4','s5'].forEach((id,i)=>{
        const v = rand([40,68,52,30,72,18][i]);
        document.getElementById(id).style.width = v+'%';
        document.getElementById(id+'p').textContent = v;
      });
      buildRiskList();
      toast('å·²åˆ·æ–°çœ‹æ¿');
    }

    function buildRiskList(){
      const el = document.getElementById('riskList');
      el.innerHTML = '';
      students
        .map(s => {
          // risk modeled from behavior
          let risk = Math.round(100 - (s.factors.checkin*50) - (s.intention*0.4) + (s.factors.reply==='æ…¢'?20:s.factors.reply==='ä¸­'?10:0) + (s.factors.leave==='é«˜'?20: s.factors.leave==='ä¸­'?10:0));
          risk = Math.max(0, Math.min(100, risk));
          return { ...s, risk };
        })
        .sort((a,b)=> b.risk - a.risk)
        .slice(0,4)
        .forEach(s => {
          const row = document.createElement('div');
          row.className = 'between';
          row.style.padding = '8px 0';
          const kind = s.risk>=60?'danger': s.risk>=30?'warning':'success';
          row.innerHTML = `
            <div class="row">
              <span class="chip" data-kind="${kind}">é£é™© ${s.risk}</span>
              <strong>${s.name}</strong>
              <span class="muted xs">Â· ${s.class}</span>
            </div>
            <button class="btn ghost" onclick="toast('å»ºè®®ï¼š${s.risk>=60?'ä¼˜å…ˆç”µè¯å›è®¿+æŒ½ç•™æ–¹æ¡ˆ': s.risk>=30?'å±•ç¤ºæˆé•¿æˆæœ+é¢„çº¦è¯•å¬':'ä¿æŒé€‚åº¦å…³æ€€ï¼Œå‡å°‘æ‰“æ‰°'}')">æŸ¥çœ‹å»ºè®®</button>
          `;
          el.appendChild(row);
        });
    }
    buildRiskList();

    // --- ROI Calculator ---
    const months = document.getElementById('months');
    const mVal = document.getElementById('mVal');
    const techUp = document.getElementById('techUp');
    const eventLevel = document.getElementById('eventLevel');
    const perHour = document.getElementById('perHour');

    function calcROI(){
      const m = parseInt(months.value,10);
      mVal.textContent = m;
      const tech = (m * 2).toFixed(0);           // æ¯æœˆçº¦ +2%ï¼ˆç¤ºæ„ï¼‰
      const per = (2 / 1.1).toFixed(1);          // æ¯è¯¾æ—¶æå‡å€¼ï¼ˆç¤ºæ„ï¼‰
      techUp.textContent = `+${tech}%`;
      perHour.textContent = `+${per}%`;
      eventLevel.textContent = m>=12 ? 'çœçº§' : m>=6 ? 'å¸‚çº§' : 'æ ¡çº§';
    }
    months.addEventListener('input', calcROI);
    calcROI();

    // --- Tab default (home) ---
    navigate('home');
  </script>
</body>
</html>
